!function(){"use strict";class e{constructor(e,t,o){var i,n;n=()=>{this._element.remove(),this._element=null},(i="_remove")in this?Object.defineProperty(this,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[i]=n,this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleCardClick=o}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}_setEventListeners(){this._element.querySelector(".element__image").addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)})),this._element.querySelector(".element__favorite-button").addEventListener("click",(e=>{e.target.classList.toggle("element__favorite-button_active")})),this._element.querySelector(".element__trash-button").addEventListener("click",this._remove)}generateCard(){this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".element__title").textContent=this._name;const e=this._element.querySelector(".element__image");return e.alt="Photo of ".concat(this._name),e.src=this._link,this._element}}function t(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class o{constructor(e){t(this,"closePopupOnRemoteClick",(e=>{e.target===e.currentTarget&&this.close()})),t(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),this._popup=document.querySelector(e)}open(){this._popup.classList.add("modal_opened"),this._popup.addEventListener("mousedown",this.closePopupOnRemoteClick),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("modal_opened"),this._popup.removeEventListener("mousedown",this.closePopupOnRemoteClick),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popup.querySelector(".modal__close-button").addEventListener("click",(()=>{this.close()}))}}class i extends o{constructor(e,t){super(e),this._popupForm=this._popup.querySelector(".modal__form"),this._inputList=Array.from(this._popupForm.querySelectorAll(".form__input")),this._callback=t}getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._callback()}))}close(){super.close(),setTimeout((()=>{this._popupForm.reset()}),500)}}function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class s{constructor(e,t){n(this,"_showInputError",((e,t)=>{t.textContent=e.validationMessage,t.classList.add(this._validationConfig.activeInputErrorClass),e.validity.valid||1!=e.value.length||e.validity.typeMismatch?e.validity.valid||(t.classList.add(this._validationConfig.errorClassSingleLine),e.classList.add(this._validationConfig.inputErrorClass)):(t.classList.add(this._validationConfig.errorClassDoubleLine),e.classList.add(this._validationConfig.inputErrorClass))})),n(this,"_hideInputError",((e,t)=>{e.classList.remove(this._validationConfig.inputErrorClass),t.classList.remove(this._validationConfig.activeInputErrorClass),t.classList.remove(this._validationConfig.errorClassSingleLine),t.classList.remove(this._validationConfig.errorClassDoubleLine)})),n(this,"_toggleInputError",((e,t)=>{this._hasInvalidInput?this._showInputError(e,t):this._hideInputError(e,t)})),n(this,"toggleButtonState",(()=>{this._hasInvalidInput()?(this._buttonElement.classList.add(this._validationConfig.inactiveButtonClass),this._buttonElement.setAttribute("disabled","true")):(this._buttonElement.classList.remove(this._validationConfig.inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))})),n(this,"_setEventListeners",(()=>{this.toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{const t=this._form.querySelector("#".concat(e.id,"-input-error"));this._hideInputError(e,t),this._toggleInputError(e,t),this.toggleButtonState()}))}))})),n(this,"_hasInvalidInput",(()=>this._inputList.some((e=>!e.validity.valid)))),this._validationConfig=e,this._form=t,this._buttonElement=this._form.querySelector(this._validationConfig.submitButtonSelector),this._inputList=Array.from(this._form.querySelectorAll(this._validationConfig.inputSelector))}resetValidation(){this._inputList.forEach((e=>{const t=this._form.querySelector("#".concat(e.id,"-input-error"));this._hideInputError(e,t)}))}enableValidation(){this._setEventListeners()}}document.querySelector(".modal_type_profile");const r=document.querySelector("#edit-button"),l=(document.querySelector(".modal__close-button_type_profile"),document.querySelector(".profile__info-name-text"),document.querySelector(".profile__info-bio"),document.querySelector("#name"),document.querySelector("#about-me"),document.querySelector(".modal__form_type_profile"),document.querySelector(".modal_type_card"),document.querySelector(".modal__close-button_type_card"),document.querySelector(".modal__form_type_card"),document.querySelector("#title"),document.querySelector("#image-link"),document.querySelector(".profile__add-button")),a=(document.querySelector(".elements"),document.querySelector(".modal_type_image"));document.querySelector(".modal__image"),document.querySelector(".modal__title_type_image"),a.querySelector("#image-close");const c=new class{constructor(e,t){let{items:o,renderer:i}=e;this._items=o,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{const t=this._renderer(e);this._container.append(t)}))}addItem(e){const t=this._renderer(e);this._container.prepend(t)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:t=>function(t){return new e(t,"#element-template",p).generateCard()}(t)},".elements"),u=new i(".modal_type_profile",(function(){const e=u.getInputValues();m.setUserInfo(e),u.close()})),_=new i(".modal_type_card",(function(){const e=this.getInputValues();c.addItem(e),_.close()})),d=new class extends o{constructor(e){super(e),this._imageModalTitle=this._popup.querySelector(".modal__title_type_image"),this._imageModalImage=this._popup.querySelector(".modal__image")}open(e,t){super.open(),this._imageModalImage.src=t,this._imageModalImage.alt="Photo of ".concat(e),this._imageModalTitle.textContent=e}}(".modal_type_image");u.setEventListeners(),_.setEventListeners(),d.setEventListeners();const m=new class{constructor(e){this._nameSelector=e.name,this._bioSelector=e.bio,this._profileName=document.querySelector(this._nameSelector),this._profileBio=document.querySelector(this._bioSelector)}getUserInfo(){return{name:this._profileName.textContent,aboutme:this._profileBio.textContent}}setUserInfo(e){this._profileName.textContent=e.name,this._profileBio.textContent=e.aboutme}}({name:".profile__info-name-text",bio:".profile__info-bio"}),p=(e,t)=>{d.open(e,t)};r.addEventListener("click",(function(){const e=m.getUserInfo();u.setInputValues(e),h["edit profile"].resetValidation(),h["edit profile"].toggleButtonState(),u.open()})),l.addEventListener("click",(function(){h["edit card"].resetValidation(),h["edit card"].toggleButtonState(),_.open()}));const h={};var f;f={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_inactive",activeInputErrorClass:"form__input-error_active",inputErrorClass:"form__input_type_error",errorClassSingleLine:"form__input-error_type_single-line",errorClassDoubleLine:"form__input-error_type_double-line"},Array.from(document.querySelectorAll(f.formSelector)).forEach((e=>{const t=new s(f,e),o=e.getAttribute("name");h[o]=t,t.enableValidation()})),c.renderItems()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WSxjQUM1QmQsRUFBYXRELGVBQWVzRSxHQUM1QkMsRUFBZSxnQkFBZ0J0QyxrQkFDL0JzQyxFQUFlLGdCQUFnQjdDLG9CQUMvQjRCLEVBQWExRSxNQUNkLElBR0R3RCxFQUFjekUsaUJBQWlCLFNBQVMsV0FDdEM0RyxFQUFlLGFBQWF0QyxrQkFDNUJzQyxFQUFlLGFBQWE3QyxvQkFDNUJnQyxFQUFVOUUsTUFDWCxJQUlELE1BQU0yRixFQUFpQixDQUFDLEVBR0VDLFFEeENELENBQ3ZCQyxhQUFjLFFBQ2R6QyxjQUFlLGVBQ2ZELHFCQUFzQix1QkFDdEJSLG9CQUFxQiwrQkFDckJaLHNCQUF1QiwyQkFDdkJNLGdCQUFpQix5QkFDakJELHFCQUFzQixxQ0FDdEJFLHFCQUFzQixzQ0NpQ0wzQixNQUFNQyxLQUFLbEMsU0FBU21DLGlCQUFpQitFLEVBQU9DLGVBQ3BENUUsU0FBUzZFLElBQ2hCLE1BQU1DLEVBQVksSUFBSXZFLEVBQWNvRSxFQUFRRSxHQUN0Q0UsRUFBV0YsRUFBWUcsYUFBYSxRQUMxQ04sRUFBZUssR0FBWUQsRUFDM0JBLEVBQVV6QyxrQkFBVixJQU9KSSxFQUFTTyxhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9zY3JpcHRzL3V0aWxzL0NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgLy8gICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWxlbWVudC10ZW1wbGF0ZVwiKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudFwiKS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvLyBBZGQgZXZlbnQgbGlzdGVuZXIgdG8gaW1hZ2UgZm9yIG9wZW5pbmcgSW1hZ2VNb2RhbCBpZiBjbGlja2VkXG4gICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpO1xuICAgIGltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGV2ZW50IGxpc3RlbmVyIHRvIGZhdm9yaXRlIGJ1dHRvblxuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2Zhdm9yaXRlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRfX2Zhdm9yaXRlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgICB9KTtcblxuICAgIC8vIEFkZCBldmVudCBsaXN0ZW5lciB0byB0cmFzaCBidXR0b25cbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190cmFzaC1idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fcmVtb3ZlKTtcbiAgfVxuXG4gIF9yZW1vdmUgPSAoKSA9PiB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfTtcblxuICAvLyBDcmVhdGUgYSBmdW5jdGlvbiBmb3IgZWRpdGluZyB0aGUgZWxlbWVudCB0ZW1wbGF0ZSB0byByZXR1cm4gYSB1bmlxdWUgZWxlbWVudCBjYXJkXG4gIC8vIENyZWF0ZSBuZXcgY2FyZCBlbGVtZW50XG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICBjb25zdCBpbWFnZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XG4gICAgaW1hZ2VFbGVtZW50LmFsdCA9IGBQaG90byBvZiAke3RoaXMuX25hbWV9YDtcbiAgICBpbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICAvLyBDbG9zZSBtb2RhbCB3aW5kb3cgYnkgY2xpY2tpbmcgb24gb3ZlcmxheVxuICBjbG9zZVBvcHVwT25SZW1vdGVDbGljayA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gTWV0aG9kIGZvciBjbG9zaW5nIHBvcHVwIGJ5IHByZXNzaW5nIEVzYyBrZXlcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIFRoYW5rcyBmb3IgdGhlIGNsYXJpZmljYXRpb24gYW5kIGluc2lnaHQgb24gbW9kaWZ5aW5nIHRoZSBtZXRob2RzIHRvIGFycm93IG1ldGhvZHMhXG5cbiAgLy8gT3BlbiBwb3B1cFxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLmNsb3NlUG9wdXBPblJlbW90ZUNsaWNrKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICAvLyBDbG9zZSBwb3B1cFxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIHRoaXMuX3BvcHVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5jbG9zZVBvcHVwT25SZW1vdGVDbGljayk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgLy8gU2V0IEV2ZW50TGlzdGVuZXJzXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBjYWxsYmFjaykge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpXG4gICAgKTtcbiAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xuICB9XG5cbiAgZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG4gICAgfSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fY2FsbGJhY2soKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICAgIH0sIDUwMCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybSkge1xuICAgIHRoaXMuX3ZhbGlkYXRpb25Db25maWcgPSB2YWxpZGF0aW9uQ29uZmlnO1xuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl92YWxpZGF0aW9uQ29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5wdXRTZWxlY3RvcilcbiAgICApO1xuICB9XG5cbiAgLy8gRnVuY3Rpb24gdG8gc2hvdyBpbnB1dCBlcnJvclxuICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBmb3JtRXJyb3IpID0+IHtcbiAgICBmb3JtRXJyb3IudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZm9ybUVycm9yLmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5hY3RpdmVJbnB1dEVycm9yQ2xhc3MpO1xuICAgIGlmIChcbiAgICAgICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQgJiZcbiAgICAgIGlucHV0RWxlbWVudC52YWx1ZS5sZW5ndGggPT0gMSAmJlxuICAgICAgIWlucHV0RWxlbWVudC52YWxpZGl0eS50eXBlTWlzbWF0Y2hcbiAgICApIHtcbiAgICAgIGZvcm1FcnJvci5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuZXJyb3JDbGFzc0RvdWJsZUxpbmUpO1xuICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIH0gZWxzZSBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgZm9ybUVycm9yLmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5lcnJvckNsYXNzU2luZ2xlTGluZSk7XG4gICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl92YWxpZGF0aW9uQ29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEZ1bmN0aW9uIHRvIGhpZGUgaW5wdXQgZXJyb3JcbiAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZm9ybUVycm9yKSA9PiB7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGZvcm1FcnJvci5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuYWN0aXZlSW5wdXRFcnJvckNsYXNzKTtcbiAgICBmb3JtRXJyb3IuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl92YWxpZGF0aW9uQ29uZmlnLmVycm9yQ2xhc3NTaW5nbGVMaW5lKTtcbiAgICBmb3JtRXJyb3IuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl92YWxpZGF0aW9uQ29uZmlnLmVycm9yQ2xhc3NEb3VibGVMaW5lKTtcbiAgfTtcblxuICAvLyBGdW5jdGlvbiB0byByZXNldCBmb3JtIHZhbGlkYXRpb25cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0IGZvcm1FcnJvciA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0taW5wdXQtZXJyb3JgXG4gICAgICApO1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBmb3JtRXJyb3IpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gRnVuY3Rpb24gdG8gdG9nZ2xlIHRoZSBpbnB1dCBlcnJvcnMgYmFzZWQgb24gdmFsaWRpdHlcbiAgX3RvZ2dsZUlucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBmb3JtRXJyb3IpID0+IHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGZvcm1FcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZm9ybUVycm9yKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gRnVuY3Rpb24gdG8gdG9nZ2xlIFN1Ym1pdCBidXR0b24gc3RhdGUgKGRpc2FibGVkIG9yIG5vdClcbiAgdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoXG4gICAgICAgIHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzc1xuICAgICAgKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXG4gICAgICAgIHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzc1xuICAgICAgKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgfVxuICB9O1xuXG4gIC8vIEZ1bmN0aW9uIHRvIGluaXRpYWxseSBzZXQgYWxsIGZvcm0gYW5kIGVsZW1lbnQgc3RhdGVzIHRvIHRoZSBjb3JyZWN0IGRpc3BsYXksIGFzIHdlbGwgYXNcbiAgLy8gc2V0IGV2ZW50IGxpc3RlbmVycyBvbiBlYWNoIGlucHV0IHRvIHJ1biB2YWxpZGF0aW9uIHVwb24gbmV3IGlucHV0LlxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBmb3JtRXJyb3IgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0taW5wdXQtZXJyb3JgXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZm9ybUVycm9yKTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGZvcm1FcnJvcik7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIEZ1bmN0aW9uIHRvIGNoZWNrIGlmIGFsbCBpbnB1dCB2YWx1ZXMgYXJlIHZhbGlkXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9O1xuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiLy9Jbml0aWFsaXplIHZhcmlhYmxlcyBmb3IgbW9kYWwgd2luZG93XG5cbi8vIFByb2ZpbGUgTW9kYWwgd2luZG93XG5jb25zdCBwcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX3R5cGVfcHJvZmlsZVwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVNb2RhbENsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX2Nsb3NlLWJ1dHRvbl90eXBlX3Byb2ZpbGVcIlxuKTtcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbmZvLW5hbWUtdGV4dFwiKTtcbmNvbnN0IHByb2ZpbGVBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW5mby1iaW9cIik7XG5jb25zdCBmb3JtTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVwiKTtcbmNvbnN0IGZvcm1EZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWJvdXQtbWVcIik7XG5jb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1fdHlwZV9wcm9maWxlXCIpO1xuXG4vLyBDYXJkIE1vZGFsIHdpbmRvd1xuY29uc3QgbmV3Q2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF90eXBlX2NhcmRcIik7XG5jb25zdCBuZXdDYXJkTW9kYWxDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19jbG9zZS1idXR0b25fdHlwZV9jYXJkXCJcbik7XG5jb25zdCBuZXdDYXJkTW9kYWxGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybV90eXBlX2NhcmRcIik7XG5jb25zdCBjYXJkVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RpdGxlXCIpO1xuY29uc3QgY2FyZEltYWdlTGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtbGlua1wiKTtcbmNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5jb25zdCBjYXJkc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzXCIpO1xuXG4vLyBJbWFnZSBNb2RhbCB3aW5kb3dcbmNvbnN0IGltYWdlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX3R5cGVfaW1hZ2VcIik7XG5jb25zdCBpbWFnZU1vZGFsSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbmNvbnN0IGltYWdlTW9kYWxUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3RpdGxlX3R5cGVfaW1hZ2VcIik7XG5jb25zdCBpbWFnZU1vZGFsQ2xvc2VCdXR0b24gPSBpbWFnZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtY2xvc2VcIik7XG5cbi8vIENyZWF0ZSBhbiBhcnJheSBjb250YWluaW5nIGFsbCBzaXggaW5pdGlhbGl6ZWQgb2JqZWN0c1xuXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcblxuLy8gSW5pdGlhbGl6aW5nIHRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBmb3IgdmFsaWRhdGlvblxuXG5jb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX3N1Ym1pdC1idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19zdWJtaXQtYnV0dG9uX2luYWN0aXZlXCIsXG4gIGFjdGl2ZUlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzc1NpbmdsZUxpbmU6IFwiZm9ybV9faW5wdXQtZXJyb3JfdHlwZV9zaW5nbGUtbGluZVwiLFxuICBlcnJvckNsYXNzRG91YmxlTGluZTogXCJmb3JtX19pbnB1dC1lcnJvcl90eXBlX2RvdWJsZS1saW5lXCIsXG59O1xuXG5leHBvcnQge1xuICBwcm9maWxlTW9kYWwsXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxuICBwcm9maWxlTW9kYWxDbG9zZUJ1dHRvbixcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVBYm91dCxcbiAgZm9ybU5hbWUsXG4gIGZvcm1EZXNjcmlwdGlvbixcbiAgcHJvZmlsZUZvcm0sXG4gIG5ld0NhcmRNb2RhbCxcbiAgbmV3Q2FyZE1vZGFsQ2xvc2VCdXR0b24sXG4gIG5ld0NhcmRNb2RhbEZvcm0sXG4gIGNhcmRUaXRsZSxcbiAgY2FyZEltYWdlTGluayxcbiAgYWRkQ2FyZEJ1dHRvbixcbiAgY2FyZHNMaXN0LFxuICBpbWFnZU1vZGFsLFxuICBpbWFnZU1vZGFsSW1hZ2UsXG4gIGltYWdlTW9kYWxUaXRsZSxcbiAgaW1hZ2VNb2RhbENsb3NlQnV0dG9uLFxuICBpbml0aWFsQ2FyZHMsXG4gIHZhbGlkYXRpb25Db25maWcsXG59O1xuIiwiLy8gaW1wb3J0IHRoZSBtYWluIGNzcyBzdHlsZXNoZWV0XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG4vLyBpbXBvcnRcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mb1wiO1xuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuXG4vLyBpbXBvcnQgY29uc3RhbnRzXG5pbXBvcnQge1xuICBwcm9maWxlRWRpdEJ1dHRvbixcbiAgYWRkQ2FyZEJ1dHRvbixcbiAgaW5pdGlhbENhcmRzLFxuICB2YWxpZGF0aW9uQ29uZmlnLFxufSBmcm9tIFwiLi4vc2NyaXB0cy91dGlscy9Db25zdGFudHMuanNcIjtcblxuLy9cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgXCIjZWxlbWVudC10ZW1wbGF0ZVwiLCBoYW5kbGVDYXJkQ2xpY2spO1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuLy8gSW5pdGlhbGl6ZSBjYXJkTGlzdFxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICByZXR1cm4gY3JlYXRlQ2FyZChpdGVtKTtcbiAgICB9LFxuICB9LFxuICBcIi5lbGVtZW50c1wiXG4pO1xuXG4vLyBJbml0aWFsaXplIGluc3RhbmNlcyBvZiB0aGUgUG9wdXAgY2xhc3NlcyBmb3IgZWFjaCBtb2RhbCB3aW5kb3dcbmV4cG9ydCBjb25zdCBtb2RhbFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIubW9kYWxfdHlwZV9wcm9maWxlXCIsXG4gIHN1Ym1pdFByb2ZpbGVcbik7XG5leHBvcnQgY29uc3QgbW9kYWxDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIubW9kYWxfdHlwZV9jYXJkXCIsIHN1Ym1pdENhcmQpO1xuY29uc3QgbW9kYWxJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5tb2RhbF90eXBlX2ltYWdlXCIpO1xuXG4vLyBTZXQgRXZlbnQgTGlzdGVuZXJzXG5tb2RhbFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbm1vZGFsQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xubW9kYWxJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBJbml0aWFsaXplIGFuIGluc3RhbmNlIG9mIHRoZSBVc2VySW5mbyBjbGFzc1xuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lOiBcIi5wcm9maWxlX19pbmZvLW5hbWUtdGV4dFwiLFxuICBiaW86IFwiLnByb2ZpbGVfX2luZm8tYmlvXCIsXG59KTtcblxuLy8gQ2FsbGJhY2sgZnVuY3Rpb24gZm9yIG1vZGFsUHJvZmlsZVxuZnVuY3Rpb24gc3VibWl0UHJvZmlsZSgpIHtcbiAgY29uc3QgcHJvZmlsZVZhbHVlcyA9IG1vZGFsUHJvZmlsZS5nZXRJbnB1dFZhbHVlcygpO1xuICB1c2VySW5mby5zZXRVc2VySW5mbyhwcm9maWxlVmFsdWVzKTtcbiAgbW9kYWxQcm9maWxlLmNsb3NlKCk7XG59XG5cbi8vIENhbGxiYWNrIGZ1bmN0aW9uIGZvciBtb2RhbENhcmRcbmV4cG9ydCBmdW5jdGlvbiBzdWJtaXRDYXJkKCkge1xuICBjb25zdCBpbnB1dFZhbHVlcyA9IHRoaXMuZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgY2FyZExpc3QuYWRkSXRlbShpbnB1dFZhbHVlcyk7XG5cbiAgbW9kYWxDYXJkLmNsb3NlKCk7XG59XG5cbi8vICoqKiogTU9EQUwgV0lORE9XUyAqKioqIC8vXG5cbi8vRnVuY3Rpb25zXG5cbi8vIGhhbmRsZUNhcmRDbGljayBmdW5jdGlvbiB0byBwYXNzIHRvIENhcmQgZm9yIG1vZGFsSW1hZ2VcbmV4cG9ydCBjb25zdCBoYW5kbGVDYXJkQ2xpY2sgPSAobmFtZSwgbGluaykgPT4ge1xuICBtb2RhbEltYWdlLm9wZW4obmFtZSwgbGluayk7XG59O1xuXG4vLyAqKioqRVZFTlRMSVNURU5FUlMqKioqXG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IHVzZXJWYWx1ZXMgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBtb2RhbFByb2ZpbGUuc2V0SW5wdXRWYWx1ZXModXNlclZhbHVlcyk7XG4gIGZvcm1WYWxpZGF0b3JzW1wiZWRpdCBwcm9maWxlXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xuICBmb3JtVmFsaWRhdG9yc1tcImVkaXQgcHJvZmlsZVwiXS50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICBtb2RhbFByb2ZpbGUub3BlbigpO1xufSk7XG5cbi8vIE9wZW4gbmV3IGNhcmQgbW9kYWwgd2hlbiB0aGUgcGx1cyBidXR0b24gaXMgY2xpY2tlZFxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBmb3JtVmFsaWRhdG9yc1tcImVkaXQgY2FyZFwiXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgZm9ybVZhbGlkYXRvcnNbXCJlZGl0IGNhcmRcIl0udG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgbW9kYWxDYXJkLm9wZW4oKTtcbn0pO1xuXG4vLyBJbml0aWFsaXplIG9iamVjdCBmb3Igc3RvcmluZyBmb3Jtc1xuXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuXG4vLyBlbmFibGUgdmFsaWRhdGlvblxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfSk7XG59O1xuXG5lbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRpb25Db25maWcpO1xuXG4vLyBSZW5kZXIgaXRlbXNcbmNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBjYXJkID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGNhcmQpO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgY29uc3QgbmV3Q2FyZCA9IHRoaXMuX3JlbmRlcmVyKGVsZW1lbnQpO1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKG5ld0NhcmQpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbWFnZU1vZGFsVGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIubW9kYWxfX3RpdGxlX3R5cGVfaW1hZ2VcIlxuICAgICk7XG4gICAgdGhpcy5faW1hZ2VNb2RhbEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG4gIH1cblxuICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgLy9BZGQgYW4gaW1hZ2UgdG8gdGhlIHBvcHVwIGFuZCB0aGUgY29ycmVzcG9uZGluZyBpbWFnZSBzcmMgYXR0cmlidXRlIGFsb25nIHdpdGggYSBjYXB0aW9uIGZvciB0aGUgaW1hZ2VcbiAgICB0aGlzLl9pbWFnZU1vZGFsSW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9pbWFnZU1vZGFsSW1hZ2UuYWx0ID0gYFBob3RvIG9mICR7bmFtZX1gO1xuICAgIHRoaXMuX2ltYWdlTW9kYWxUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gIH1cbn1cbiIsImltcG9ydCB7IG1vZGFsUHJvZmlsZSB9IGZyb20gXCIuLi8uLi9wYWdlcy9pbmRleC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICB0aGlzLl9uYW1lU2VsZWN0b3IgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fYmlvU2VsZWN0b3IgPSBkYXRhLmJpbztcbiAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fbmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9wcm9maWxlQmlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9iaW9TZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXG4gICAgICBhYm91dG1lOiB0aGlzLl9wcm9maWxlQmlvLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhwcm9maWxlVmFsdWVzKSB7XG4gICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBwcm9maWxlVmFsdWVzLm5hbWU7XG4gICAgdGhpcy5fcHJvZmlsZUJpby50ZXh0Q29udGVudCA9IHByb2ZpbGVWYWx1ZXMuYWJvdXRtZTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJ0aGlzIiwiX2VsZW1lbnQiLCJyZW1vdmUiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX3JlbW92ZSIsImdlbmVyYXRlQ2FyZCIsInRleHRDb250ZW50IiwiaW1hZ2VFbGVtZW50IiwiYWx0Iiwic3JjIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiY3VycmVudFRhcmdldCIsImNsb3NlIiwia2V5IiwiX3BvcHVwIiwib3BlbiIsImFkZCIsImNsb3NlUG9wdXBPblJlbW90ZUNsaWNrIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsImNhbGxiYWNrIiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfY2FsbGJhY2siLCJnZXRJbnB1dFZhbHVlcyIsIl9mb3JtVmFsdWVzIiwiZm9yRWFjaCIsImlucHV0IiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsInByZXZlbnREZWZhdWx0Iiwic2V0VGltZW91dCIsInJlc2V0IiwiRm9ybVZhbGlkYXRvciIsInZhbGlkYXRpb25Db25maWciLCJmb3JtIiwiaW5wdXRFbGVtZW50IiwiZm9ybUVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfdmFsaWRhdGlvbkNvbmZpZyIsImFjdGl2ZUlucHV0RXJyb3JDbGFzcyIsInZhbGlkaXR5IiwidmFsaWQiLCJsZW5ndGgiLCJ0eXBlTWlzbWF0Y2giLCJlcnJvckNsYXNzU2luZ2xlTGluZSIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3NEb3VibGVMaW5lIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9zaG93SW5wdXRFcnJvciIsIl9oaWRlSW5wdXRFcnJvciIsIl9idXR0b25FbGVtZW50IiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiX2Zvcm0iLCJpZCIsIl90b2dnbGVJbnB1dEVycm9yIiwic29tZSIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInJlc2V0VmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJwcm9maWxlRWRpdEJ1dHRvbiIsImFkZENhcmRCdXR0b24iLCJpbWFnZU1vZGFsIiwiY2FyZExpc3QiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiY2FyZCIsImFwcGVuZCIsImFkZEl0ZW0iLCJlbGVtZW50IiwibmV3Q2FyZCIsInByZXBlbmQiLCJjcmVhdGVDYXJkIiwibW9kYWxQcm9maWxlIiwicHJvZmlsZVZhbHVlcyIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJtb2RhbENhcmQiLCJpbnB1dFZhbHVlcyIsIm1vZGFsSW1hZ2UiLCJfaW1hZ2VNb2RhbFRpdGxlIiwiX2ltYWdlTW9kYWxJbWFnZSIsIl9uYW1lU2VsZWN0b3IiLCJfYmlvU2VsZWN0b3IiLCJiaW8iLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZUJpbyIsImdldFVzZXJJbmZvIiwiYWJvdXRtZSIsInVzZXJWYWx1ZXMiLCJmb3JtVmFsaWRhdG9ycyIsImNvbmZpZyIsImZvcm1TZWxlY3RvciIsImZvcm1FbGVtZW50IiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiXSwic291cmNlUm9vdCI6IiJ9